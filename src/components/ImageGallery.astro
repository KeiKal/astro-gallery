---
import { fetchImages } from '../utils/api';

let images = [];
let loading = true;
let error = null;

try {
  images = await fetchImages();
} catch (err) {
  error = err.message;
} finally {
  loading = false;
}
---

<div class="container mx-auto p-4">
  {loading && <p>Loading...</p>}
  {error && <p class="text-red-500">{error}</p>}
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
    {images.map((image) => (
      <div key={image.id} class="rounded overflow-hidden shadow-lg">
        <img src={image.urls.small} alt={image.alt_description} class="w-full h-48 object-cover" />
        <div class="p-4">
          <p class="text-gray-700 text-base">{image.alt_description || 'No description'}</p>
        </div>
      </div>
    ))}
  </div>
</div>